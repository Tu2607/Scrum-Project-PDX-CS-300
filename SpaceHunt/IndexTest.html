<html>
    <meta charset="UTF-8">
<head>
    <link rel="stylesheet" href="style.css">
    <script src="celestialMapFunctional.js"></script>
    <script>
    var xStart = 0;
        var yStart = 0;
        var cheat = false;
        var energy = 1000;
        var supplies = 100;
        var artifactSet = [];
        var visitedPoints = [];
        var space;
        var ship;

        // save
        //sessionStorage.setItem("xPos", xStart);
        //sessionStorage.setItem("yPos", yStart);
        sessionStorage.setItem("cheatMode", cheat);
        sessionStorage.setItem("energy", energy);
        sessionStorage.setItem("supplies", supplies);
        sessionStorage.setItem("artifactSet", JSON.stringify(artifactSet));
        sessionStorage.setItem("visitedPoints", JSON.stringify(visitedPoints));
        sessionStorage.setItem("space", JSON.stringify(space));
        sessionStorage.setItem("ship", JSON.stringify(ship));
    </script>







</head>
    
<body>


    <h1>SpaceHunt</h1>
    <p></p>
    <div class="grid-container">


        <!--Map--> 
        <div class ="board">
        	<canvas id="canvas" width="1024" height="1024"></canvas>
        </div>



        <!--Log Screen-->
        <div class="display">
            <form name="output">
                <textarea id="display" name="text-output" alight="left" readonly="true" rows="20">
                Log:
                </textarea>
            </form>
        </div>



        <!--Play/Config tab setup-->
        <div class="menu">
            <div class="tab-menu">
                <button class="tablinks" id="main" onclick="nextTab(event, 'Play')">Play</button>
                <button class="tablinks" onclick="nextTab(event, 'Config')">Config</button>
            </div>

            <!--Config Tab-->
            <div id="Config" class="tabcontent">
                <form name="config">
                    <p> Energy: <input type="text" name="energy" value="100"> </p>
                    <break>
                    <p> Supplies: <input type="text" name="supplies" value="100"></p>
                    <break>
                    <p>	Cheat mode <input type="checkbox" name="cheatMode" checked="checked"></p>
                    <break>
                    <p> Starting X-Cord <input type="range" name="xCord" value="12" min="0" max="127" oninput="xout.value = xCord.value">
                        <output name="xout"> 12 </output>
                    </p>
                    <break>
                    <p> Starting Y-Cord <input type="range" name="yCord" value="12" min="0" max="127" oninput="yout.value = yCord.value">
                        <output name="yout"> 12 </output>
                    </p>	
                </form>
			    <button type='button' onclick="updateConfig(config, UI, canvas, space, ship, cheat, artifactSet, visitedPoints); return false"> Submit </button>
            </div>


            <!--Play Tab-->
            <div id="Play" class="tabcontent">
                <div class="inner-grid-container">



                    <!--Status Block-->
                    <div class="status-grid">
                        <form name="UI">
                        STATUS

                            <p>Current Location:
                            X <input type=text name=xValue size=4>
                            Y <input type=text name=yValue size=4>
                            </p>
                            <p>Energy <input type=text name=energy size=4></p>
                            <p>Supplies <input type=text name=supplies size=4>%</p>
                            <hr>














                        <br>
                        <!--Displays Ships stats from .js file-->
	                    <!--use in ship document.getElementById("coords").innerHTML = "Location: (" + this.xPos+ "," + this.yPos + ")";-->
                        <p id="coords"></p>
                        <p id="energy"></p>
                        <p id="supplies"></p>
                        </form>
                    </div>
                <br>




                    <!--Movement and Command block-->
                    <div class="moves-grid">
                        <form name="movementUI">
                        <p>MAKE A MOVE</p>
                        <p align="center"><input type="button" class="move" value="90" size="3" onclick="move(UI, canvas, 90, eval(movementUI.distance.value)); return false;">
                        </p>
                        <p align="center"><input type="button"  value="180" size="3" onclick="move(UI, canvas, 180, eval(movementUI.distance.value)); return false;">
                        <input type="text" name=distance value=10 maxlength="3" size="4" >
                        <input type="button" value="0" size="3" onclick="move(UI, canvas, 0, eval(movementUI.distance.value)); return false;">
                        </p>
                        <p align="center"><input type="button" value="270"  size="3" onclick="move(UI, canvas, 270, eval(movementUI.distance.value)); return false;"></p>
                        </form>
                    </div>
                    <div class="action-grid">
                        <p>COMMANDS</p>
                        <input type="button" value="Sensor" size="4" onclick="sensor(canvas)">
                    </div> 
                </div>
            </div>



            

        </div>


    </div>



    <!--Script to get play and config tabs to switch-->
    <script>
        document.getElementById("main").click();

        function nextTab(evt, tab) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tab).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script>
    <script>
        window.onload = updateConfig(config, UI, canvas, space, ship, cheat, artifactSet, visitedPoints)
    </script>


    <script>
    	function writeMessage(canvas, message) {
    		var context = canvas.getContext('2d');
    		context.clearRect(450, 0, 125, 30);
    		context.font = '18pt Calibri';
    		context.fillStyle = 'black';
    		context.fillText(message, 450, 25);
    	}
    	function getMousePos(canvas, evt) {
    		var rect = canvas.getBoundingClientRect();
    		return {
    			x: evt.clientX - rect.left,
    			y: evt.clientY - rect.top
    		};
    	}
    	var canvas = document.getElementById('canvas');
    	var context = canvas.getContext('2d');

    	canvas.addEventListener('mousemove', function(evt) {
    		var mousePos = getMousePos(canvas, evt);
    		var message = Math.trunc(mousePos.x/8) + ', ' + Math.trunc(mousePos.y/8);
    		writeMessage(canvas, message);
    	}, false);

	</script>



</body>

</html>